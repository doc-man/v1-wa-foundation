<!--<div ng-controller="syncCalendarReportMasterCtrl" >-->
<div>
    <h4>Sync Calendar Reports</h4>
    <span class="alert-warning fLeft">Note: This report will show only the 7 days events.
        <span data-ng-if="syncCalendarReportDataSet.length>0"> Check only {{reportCheckDates.todayDateTime}} - {{reportCheckDates.endDateTime}}</span>
    </span>
    <div class="clearfix" style="padding-top: 2.5%;"></div>
    <div class="row">
        <!--<div class="col-md-2 pull-left startDate">
            <span>Choose start date: </span>
            <a href="javascript:void(0)" class="dropdown-toggle editable" role="button" data-ng-click="$event.stopPropagation();toggleCalenderForDate('startDate')">{{(startDateTimeForView|date:"MMM dd, yyyy") || 'empty'}}</a>
            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                <uib-datepicker data-ng-model="startDateTimeForView" show-weeks="true" class="well well-sm" data-ng-change="fnOnClickDate(selectedAttendeesForResource, startDateTimeForView, 'startDate')"></uib-datepicker>
                <div class="" style="margin-bottom: 1px; margin-top: 1px;">
                    <button class="btn btn-primary btn-xs btn-block" data-ng-click="$event.stopPropagation();toggleCalenderForDate('startDate')">Close</button>
                </div>
            </ul>

        </div>-->
        <div class="col-md-2 pull-left startDate">
            <span>Choose start date: </span>
            <p class="input-group">
                <input type="text" class="form-control" uib-datepicker-popup ng-model="startDateTimeForView" is-open="popup1.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" data-ng-change="fnOnClickDate(selectedAttendeesForResource, startDateTimeForView, 'startDate')"/>
          <span class="input-group-btn">
            <button type="button" class="btn btn-default" ng-click="open1()" data-ng-keypress="fnOnClickDate(selectedAttendeesForResource, startDateTimeForView, 'startDate')"><i class="glyphicon glyphicon-calendar"></i></button>
          </span>
            </p>
        </div>
        <!--<div class="col-md-2 pull-left endDate">
            <span>Choose end date: </span>
            <a href="javascript:void(0)" class="dropdown-toggle editable" role="button" data-ng-click="$event.stopPropagation();toggleCalenderForDate('endDate')">{{(endDateTimeForView|date:"MMM dd, yyyy") || 'empty'}}</a>
            <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
                <uib-datepicker data-ng-model="endDateTimeForView" show-weeks="true" class="well well-sm" data-ng-change="fnOnClickDate(selectedAttendeesForResource, endDateTimeForView, 'endDate')"></uib-datepicker>
                <div class="" style="margin-bottom: 1px; margin-top: 1px;">
                    <button class="btn btn-primary btn-xs btn-block" data-ng-click="$event.stopPropagation();toggleCalenderForDate('endDate')">Close</button>
                </div>
            </ul>

        </div>-->
        <div class="col-md-2 pull-left endDate">
            <span>Choose end date: </span>
            <p class="input-group">
                <input type="text" class="form-control" uib-datepicker-popup ng-model="endDateTimeForView" is-open="popup2.opened" datepicker-options="dateOptions" ng-required="true" close-text="Close" data-ng-change="fnOnClickDate(selectedAttendeesForResource, endDateTimeForView, 'endDate')"/>
          <span class="input-group-btn">
            <button type="button" class="btn btn-default" ng-click="open2()" data-ng-keypress="fnOnClickDate(selectedAttendeesForResource, endDateTimeForView, 'endDate')"><i class="glyphicon glyphicon-calendar"></i></button>
          </span>
            </p>
        </div>
        <div class="resourcesSelectBox">
            <div class="col-md-4 pull-left">
                <span>Choose a Host: </span>
                <oi-select
                        id="hostField"
                        oi-options="item.name for item in allAvailableResources | limitTo: 10"
                        ng-model="selectedAttendeesForResource"
                        autofocus
                        placeholder="Select a host"
                        class="ng-pristine ng-untouched ng-valid ng-isolate-scope focused"
                        data-ng-change="fnGetEventListForAttendees(selectedAttendeesForResource)">
                </oi-select>
            </div>
        </div>
        <div class="col-sm-6 col-xs-12 col-md-3 pull-left" data-ng-if="messageForShowInSync">
            <div id="syncMessage" style="position: absolute; padding: 6px;" class="alert " data-ng-class="{'alert-danger':getMessageClass=='danger','alert-success':getMessageClass!='danger'}">
                <strong>{{messageForShowInSync}}</strong>
            </div>
        </div>
    </div>

    <div class="clearfix" style="padding-top: 0.4%;"></div>
    <div class="textarea-initial" data-ng-if="!displaySyncCalendarReportDataSet && selectedAttendeesForResource != null">Loading...</div>
    <!--<div class="textarea-initial" data-ng-if="selectedAttendeesForResource == null">Please! at first select a host or attendee</div>-->
    <div class="textarea-initial" data-ng-if="displaySyncCalendarReportDataSet.length==0 && selectedAttendeesForResource.length != 0">Nothing found!</div>
    <table data-ng-if="syncCalendarReportDataSet.length>0" st-table="displaySyncCalendarReportDataSet" st-safe-src="syncCalendarReportDataSet" class="table table-striped table-hover table-condensed">
        <thead>
        <tr>
            <th class="cPointer col-md-2 sortable" st-sort="eventDate"><span class="sorticon"></span>Event Date</th>
            <th class="cPointer col-md-2 sortable" st-sort="eventTime"><span class="sorticon"></span>Event Time</th>
            <th class="cPointer col-md-2 sortable" st-sort="timeduration"><span class="sorticon"></span>Duration</th>
            <th class="cPointer col-md-2 sortable" st-sort="attendeeDetails.name"><span class="sorticon"></span>Patient name in SC EMR</th>
            <th class="cPointer col-md-2 sortable" st-sort="eventTypename"><span class="sorticon"></span>Event Type</th>
            <th class="cPointer col-md-1"><span title="Savantcare Calendar"></span>SC Calendar</th>
            <th class="cPointer col-md-1"><span title="Google Calendar"></span>Google Calendar</th>
        </tr>
        <tr>
            <th class="padding-left-0p"><input st-search="eventDate" ng-model="startDateTimeForFilter"/></th>
            <th class="padding-left-0p"><input st-search="eventTime"/></th>
            <th class="padding-left-0p"><input st-search="timeduration"/></th>
            <th class="padding-left-0p"><input st-search="attendeeDetails.name"/></th>
            <th class="padding-left-0p"><input st-search="eventTypename"/></th>
            <th><button type="button" class="btn btn-info btn-sm" data-ng-class="{'disabled':nowSelectedSyncForSc.length == 0}" data-ng-click="fnUpdateSyncForSc()"><strong>Sync</strong></button></th>
            <th><button type="button" class="btn btn-info btn-sm" data-ng-class="{'disabled':nowSelectedSyncForGoogle.length == 0}" data-ng-click="fnUpdateSyncForGoogle()"><strong>Sync</strong></button></th>
        </tr>
        </thead>
        <tbody>
        <tr class="cPointer reveal-elem-parent" data-ng-repeat="row in displaySyncCalendarReportDataSet" data-ng-class="{'success':row.getStoredStatus=='Success','danger':row.getStoredStatus=='Fail'}" ng-attr-title="{{row.getStoredMessage}}">
            <td>
                <div data-ng-if="row.getStoredStatus=='Fail'" class="pull-left" style="width: 20px;"><i class="fa fa-exclamation-triangle"></i></div>
                <div data-ng-if="row.manualInterventionRequired" class="pull-left" style="width: 20px; color: red;" title="Manual intervention required."><i class="fa fa-exclamation-triangle"></i></div>
                <div class="input-group">{{row.eventDate||'empty'}}</div>
            </td>
            <td>
                <div class="input-group">{{row.eventTime||'empty'}}</div>
            </td>
            <td>
                <div class="input-group">{{row.timeduration||'empty'}} min</div>
            </td>
            <td>
                <div class="input-group" data-ng-if="row.attendeeDetails.length == 0"></div>
                <div class="input-group" data-ng-if="row.attendeeDetails.length != 0">
                    <span data-ng-repeat="attendee in row.attendeeDetails">
                        {{attendee.name}}<span data-ng-if="!$last" class="ng-scope">, </span>
                    </span>
                </div>
            </td>
            <td>
                <div class="input-group">{{row.eventTypename||'empty'}}</div>
            </td>
            <td>
                <input data-ng-if="row.scCalendarCheck != true" type="checkbox" ng-model="row.selectForSyncOfScCalendar" data-ng-click="checkSelectedDataForSc($index, row)"/>
                <!--<div class="input-group">{{row.scCalendarCheck||'empty'}}</div>-->
                <span data-ng-if="row.scCalendarCheck == true" class="glyphicon glyphicon-ok" style="color: #1DB93A;"></span>
                <!--<span data-ng-if="row.scCalendarCheck != true" class="glyphicon glyphicon-remove" style="color: #DA3F3F;"></span>-->
            </td>
            <td>
                <input data-ng-if="row.googleCalendarCheck != true" type="checkbox" ng-model="row.selectForSyncOfGooogleCalendar" data-ng-click="checkSelectedDataForGoogle($index, row)"/>
                <!--<div class="input-group">{{row.googleCalendarCheck||'empty'}}</div>-->
                <span data-ng-if="row.googleCalendarCheck == true" class="glyphicon glyphicon-ok" style="color: #1DB93A;"></span>
                <!--<span data-ng-if="row.googleCalendarCheck != true" class="glyphicon glyphicon-remove" style="color: #DA3F3F;"></span>-->
            </td>
        </tr>
        </tbody>
        <tfoot>
        <tr>
            <td colspan="4" class="text-center">
                <div data-ng-show="paginationInfo.totalItemCount>0">Total <span style="color: #444;">{{paginationInfo.totalItemCount}}</span> Event<span data-ng-show="paginationInfo.totalItemCount>1">s</span>.
                    Show
                    <div class="btn-group report-info">
                        <label class="btn btn-default" ng-model="itemsByPage" uib-btn-radio="25" ng-class="{'disabled':paginationInfo.totalItemCount<1}">25</label>
                        <label class="btn btn-default" ng-model="itemsByPage" uib-btn-radio="50" ng-class="{'disabled':paginationInfo.totalItemCount<26}">50</label>
                        <label class="btn btn-default" ng-model="itemsByPage" uib-btn-radio="100" ng-class="{'disabled':paginationInfo.totalItemCount<51}">100</label>
                        <label class="btn btn-default" ng-model="itemsByPage" uib-btn-radio="200" ng-class="{'disabled':paginationInfo.totalItemCount<101}">200</label>
                    </div>
                    Event per page.
                </div>
                <div data-ng-show="paginationInfo.totalItemCount==0">
                    No Event to show.
                </div>
            </td>
            <td colspan="4" class="text-center">
                <div data-st-pagination="" data-current-page="currentPage" data-st-items-by-page="itemsByPage" data-st-template="directives/pagination.custom.html"></div>
            </td>
        </tr>
        </tfoot>
    </table>
    <a data-ng-click="fnShowZocDocActivityLog();isHidden=!isHidden;"><span data-ng-if="!isHidden">Show</span><span data-ng-if="isHidden">Hide</span> ZocDoc activity log</a>
    <div data-ng-if="isHidden" class="col-sm-12" >
        <div class="textarea-initial" data-ng-if="zocDocActivityLogData.length==0">No activity log found</div>
        <table data-ng-if="zocDocActivityLogData.length > 0" st-table="displayZocDocActivityLogCollection"  st-safe-src="zocDocActivityLogData" class="table table-striped tableHeaderLight activityLogTable">
            <thead>
            <tr>
                <th class="cPointer col-md-1 sortable" st-sort="clientIPAddressForActivity"><span class="sorticon"></span>IP address</th>
                <th class="cPointer col-md-1 sortable" st-sort="typeOfSection"><span class="sorticon"></span>Section</th>
                <th class="cPointer col-md-1 sortable" st-sort="doneByUserFullName"><span class="sorticon"></span>Activity done by</th>
                <th class="cPointer col-md-1 sortable" st-sort="typeOfActivity"><span class="sorticon"></span>Type of activity</th>
                <th class="cPointer col-md-1 sortable" st-sort="pluginFieldName"><span class="sorticon"></span>Field of activity</th>
                <th class="cPointer col-md-2 sortable" st-sort="timeOfActivity"><span class="sorticon"></span>Time of activity</th>
                <th class="col-md-6 cDefault">Description</th>
            </tr>
            <tr>
                <th><input st-search="clientIPAddressForActivity"/></th>
                <th><input st-search="typeOfSection"/></th>
                <th><input st-search="doneByUserFullName"/></th>
                <th><input st-search="typeOfActivity"/></th>
                <th><input st-search="pluginFieldName"/></th>
                <th>
                    <input st-search="timeOfActivity" data-ng-model="filterDate" />
                </th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="log in displayZocDocActivityLogCollection">

                <td>
                    <div class="input-group">
                        <span>{{::log.clientIPAddressForActivity}}</span>
                    </div>
                </td>
                <td>
                    <div class="input-group">
                        <span>{{::log.typeOfSection}}</span>
                    </div>
                </td>
                <td>
                    <div class="input-group">
                        <span>{{::log.doneByUserFullName}}</span>
                    </div>
                </td>
                <td>
                    <div class="input-group">
                        <span>{{::log.typeOfActivity}}</span>
                    </div>
                </td>
                <td>
                    <div class="input-group">
                        <span data-ng-if="log.pluginFieldName != 'Add'">{{::log.pluginFieldName}}</span>
                        <span data-ng-if="log.pluginFieldName == 'Add'"></span>
                    </div>
                </td>
                <td>
                    <div class="input-group">
                        <span>{{::log.timeOfActivity}}</span>
                        <span data-ng-if="log.timezoneAbbreviationForActivity.length > 0"> ({{::log.timezoneAbbreviationForActivity}})</span>
                    </div>
                </td>
                <td>
                    <div class="input-group">
                        {{::log.newValue}}
                    </div>
                </td>
            </tr>
            </tbody>
            <tfoot ng-if="zocDocActivityLogData.length>10">
            <tr>
                <td colspan="8" class="text-center">
                    <div st-pagination="" st-items-by-page="10" st-displayed-pages="7"></div>
                </td>
            </tr>
            </tfoot>
        </table>
    </div>
</div>
